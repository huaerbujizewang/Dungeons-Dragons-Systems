<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奥法帝国疆域</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Noto+Serif+SC:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --suz-bg: #1a1b20;
            --suz-card-bg: #25262c;
            --suz-gold: #cba052;
            --suz-red: #d9534f;
            --suz-orange: #f0ad4e;
            --suz-yellow: #f7e96b;
            --suz-cyan: #5bc0de;
            --suz-green: #5cb85c;
            --suz-gray: #888;
            --suz-border: #444;
            --suz-light-green: #90ee90;
        }

        body { margin: 0; padding: 0; background-color: #111; font-family: "PingFang SC", "Roboto", sans-serif; color: #e0e0e0; overflow: hidden; height: 100vh; display: flex; justify-content: center; align-items: center; }

        .floating-back-btn { position: fixed; top: 20px; left: 20px; z-index: 100; background: rgba(0, 0, 0, 0.6); border: 1px solid var(--suz-gold); color: var(--suz-gold); padding: 10px 20px; text-decoration: none; font-family: 'Playfair Display', serif; letter-spacing: 1px; font-size: 14px; transition: 0.3s; backdrop-filter: blur(4px); }
        .floating-back-btn:hover { background: var(--suz-gold); color: #000; }

        .map-container { position: relative; width: 100%; height: 100vh; display: flex; justify-content: center; align-items: center; background: #000; }
        svg { width: 100%; height: 100%; max-height: 100vh; display: block; }

        .region-poly { fill: transparent; stroke: none; cursor: pointer; transition: all 0.3s ease; }
        .region-poly:hover { fill: rgba(203, 160, 82, 0.3); stroke: var(--suz-gold); stroke-width: 2px; }

        /* 弹窗样式 */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); z-index: 1000; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.active { display: flex; opacity: 1; }
        
        .suz-card { width: 420px; background-color: var(--suz-card-bg); border: 1px solid var(--suz-border); border-top: 4px solid var(--suz-gold); box-shadow: 0 20px 60px rgba(0,0,0,0.8); transform: translateY(20px); transition: transform 0.3s ease; position: relative; }
        .modal-overlay.active .suz-card { transform: translateY(0); }
        
        .close-btn { position: absolute; top: 10px; right: 15px; color: var(--suz-gray); font-size: 24px; cursor: pointer; z-index: 10; }
        .suz-header { background: linear-gradient(180deg, #2f3036 0%, #25262c 100%); padding: 25px 20px; text-align: center; border-bottom: 1px solid var(--suz-border); }
        .suz-country-name { font-family: 'Noto Serif SC', serif; font-size: 28px; color: var(--suz-gold); letter-spacing: 1px; margin-bottom: 8px; }
        .suz-motto { font-size: 13px; color: var(--suz-gray); font-style: italic; }
        
        .suz-visuals { display: flex; padding: 20px; gap: 15px; align-items: flex-start; background: rgba(0,0,0,0.2); }
        .suz-flag-container { width: 100px; height: 66px; background-color: #000; border: 1px solid #555; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .suz-flag-img { width: 100%; height: 100%; object-fit: cover; display: none; } /* 默认隐藏，加载后显示 */
        .suz-flag-text { color: #555; font-size: 10px; display: block; }

        .suz-desc { font-size: 13px; line-height: 1.5; color: #ccc; flex: 1; }
        .suz-data-grid { padding: 10px 25px 25px 25px; }
        .suz-row { display: flex; justify-content: space-between; align-items: center; padding: 11px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; }
        .suz-row:last-child { border-bottom: none; }
        .suz-label { color: var(--suz-gray); font-weight: 500;}
        .suz-value { font-weight: bold; text-align: right; }

        /* 颜色矩阵强制生效 */
        .color-red { color: var(--suz-red) !important; }
        .color-orange { color: var(--suz-orange) !important; }
        .color-yellow { color: var(--suz-yellow) !important; }
        .color-cyan { color: var(--suz-cyan) !important; }
        .color-green { color: var(--suz-green) !important; }
        .color-gray { color: var(--suz-gray) !important; }
        .color-light-green { color: var(--suz-light-green) !important; } 
        .color-gold { color: var(--suz-gold); }
        
        .suz-action-btn { width: 100%; padding: 15px; background: #2f3036; border: none; border-top: 1px solid var(--suz-border); color: var(--suz-gray); cursor: pointer; text-transform: uppercase; letter-spacing: 2px; font-size: 11px; transition: 0.2s; }
        .suz-action-btn:hover { background: #383940; color: #fff; }
    </style>
</head>
<body>

    <a href="../world.html" class="floating-back-btn">⬅ 返回</a>

    <div class="map-container">
        <svg viewBox="0 0 1928 1544" preserveAspectRatio="xMidYMid meet">
            <image href="images/far_east_map.png" width="1928" height="1544" />
            <!-- 区域定义保持不变 -->
            <polygon class="region-poly" onclick="openCard('thay')" points="941,1427 999,1416 992,1386 1040,1362 1105,1355 1130,1370 1164,1413 1271,1433 1285,1392 1336,1404 1380,1370 1358,1335 1370,1306 1408,1297 1440,1295 1466,1309 1483,1330 1495,1336 1508,1355 1530,1355 1551,1357 1583,1341 1609,1340 1617,1375 1653,1375 1672,1352 1745,1328 1787,1295 1837,1273 1856,1232 1849,1214 1852,1154 1876,1118 1851,1052 1839,1033 1845,982 1791,906 1796,877 1811,824 1830,814 1844,780 1886,747 1900,710 1866,691 1852,654 1823,615 1851,555 1862,495 1825,490 1801,465 1769,478 1723,468 1626,487 1556,483 1537,465 1488,436 1447,451 1391,426 1346,443 1268,463 1251,502,1283 550,1258 582,1215 599,1188 616,1152 640,1128 769,1150 838,1157 887,1128 911,1082 941,1077 992,1006 1021,985 1044,1024 1103,1059 1149,1093 1180,1098 1209,1081 1241,1055 1255,1004 1292,963 1357" />
            <polygon class="region-poly" onclick="openCard('aglarond')" points="956,1009 982,1037 1024,1117 1082,1176 1094,1207 1076,1239 950,1362 924,1353 902,1341 873,1353 830,1360 820,1382 803,1379 796,1353 725,1353 728,1377 713,1379 699,1365 634,1362 611,1352 600,1370 553,1381 525,1386 515,1418 495,1428 474,1415 439,1406 439,1382 427,1365 403,1360 393,1392 362,1391 353,1382 333,1374 316,1377 301,1379 285,1365 306,1270 341,1222 362,1198 372,1180 420,1183 473,1147 469,1095 457,1081 471,1052 503,1072 537,1083 559,1069 590,1076 604,1055 645,1076 677,1076 699,1095 743,1088 783,1103 846,1047 895,1025" />
            <polygon class="region-poly" onclick="openCard('altumbel')" points="284,1364 304,1273 272,1270 258,1256 186,1249 144,1200 96,1200 55,1231 9,1229 3,1273 6,1319 32,1406 38,1430 67,1449 159,1459 215,1433 265,1403" />
            <polygon class="region-poly" onclick="openCard('rashemen')" points="1215,3 1203,15 1212,36 1171,95 1166,126 1185,150 1188,175 1200,184 1188,201 1195,233 1200,255 1195,277 1202,293 1202,315 1227,323 1258,342 1283,349 1292,356 1304,344 1319,349 1333,332 1350,327 1365,335 1379,335 1399,354 1413,356 1423,369 1457,356 1483,339 1508,363 1523,392 1522,420 1488,427 1546,468 1614,480 1699,463 1728,434 1724,393 1716,298 1634,245 1622,208 1632,184 1636,172 1650,157 1641,134 1612,133 1576,99 1568,65 1529,75 1503,37 1484,0" />
            <polygon class="region-poly" onclick="openCard('alaor')" points="1411,1459 1386,1469 1363,1500 1350,1537 1372,1537 1418,1484" />
            <polygon class="region-poly" onclick="openCard('thesk')" points="1036,172 1084,167 1118,192 1145,243 1164,260 1149,295 1224,368 1283,376 1305,381 1305,434 1270,458 1248,504 1277,543 1237,587 1176,616 1147,642 1123,771 1150,880 1081,938 1069,987 987,1033 956,1006 892,1021 849,1040 781,1096 738,1078 738,1055 737,1018 704,986 643,970 605,1015 582,1018 573,994 554,979 524,965 478,970 461,967 459,946 433,935 389,899 398,884 428,899 466,904 491,890 507,863 483,838 456,797 456,783 399,749 444,722 466,678 430,671 399,628 422,604 483,599 495,613 519,609 525,586 558,572 558,598 568,613 536,647 524,681 544,689 570,667 582,664 559,708 580,718 595,723 602,693 623,708 645,708 668,703 668,676 694,662 720,633 737,609 735,575 732,548 714,548 692,540 682,524 686,509 708,526 743,535 759,516 759,500 742,489 742,473 730,460 718,456 701,444 699,420 730,434 750,431 762,417 783,444 805,458 817,460 827,451 851,451 864,427 864,410 864,388 881,407 898,398 919,398 919,376 927,356 941,340" />
            <polygon class="region-poly" onclick="openCard('greatdale')" points="164,0 161,46 164,73 180,82 207,83 186,109 209,121 204,136 222,153 260,187 302,209 328,260 369,306 355,344 365,381 359,412 405,432 439,465 415,504 405,565 416,598 481,596 493,609 517,609 520,584 563,570 568,609 556,638 537,655 529,684 544,684 571,662,587 664,568 695,583 710,604 684,629 696,648 700,660 678,675 664,699 643,725 618,733 609,728 572,726 557,694 540,675 511,691 502,711 514,726 526,745 521,752 506,737 495,735 482,732 472,708 460,692 437,696 422,708 420,723 420,735 426,757 420,778 420,795 441,810 455,825 443,844 446,861 393,866 376,883 390,905 386,924,352 1028,174 1081,160 1057,66 996,51 939,5 895,7 835,7 774,0 650,92 517,65 423,22 353,5" />
        </svg>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="suz-card">
            <span class="close-btn" onclick="closeModal()">×</span>
            <div class="suz-header">
                <div class="suz-country-name" id="c-name">国家名称</div>
                <div class="suz-motto" id="c-motto">"国家格言"</div>
            </div>
            <div class="suz-visuals">
                <div class="suz-flag-container">
                    <img id="c-flag-img" src="" alt="Flag" class="suz-flag-img">
                    <span id="c-flag-text" class="suz-flag-text">FLAG</span>
                </div>
                <div class="suz-desc" id="c-desc">国家简述...</div>
            </div>
            <div class="suz-data-grid">
                <div class="suz-row"><span class="suz-label">外交关系</span><span class="suz-value" id="c-relation">中立</span></div>
                <div class="suz-row"><span class="suz-label">军事实力</span><span class="suz-value" id="c-military">未知</span></div>
                <div class="suz-row"><span class="suz-label">统治者</span><span class="suz-value" id="c-leader">未知</span></div>
                <div class="suz-row"><span class="suz-label">政治体制</span><span class="suz-value" id="c-gov">未知</span></div>
                <div class="suz-row"><span class="suz-label">主要出口</span><span class="suz-value color-gold" id="c-export">无</span></div>
                <div class="suz-row"><span class="suz-label">首府</span><span class="suz-value" id="c-capital">未知</span></div>
            </div>
            <button class="suz-action-btn">查看完整情报档案</button>
        </div>
    </div>

    <script>
        const countryData = {
            "thay": {
                name: "塞尔帝国",
                motto: "\"秩序即永恒，死亡即仆从\"",
                desc: "古老而强大的法师帝国，正处于剧烈的社会与经济转型期。在摄政王的铁腕与新派总督的改革之间，一个恐怖的现代化机器正在苏醒。",
                relation: "不信任",
                military: "压倒性",
                leader: "摄政王 萨扎斯坦",
                gov: "法师精英独裁",
                export: "魔法物品, 谷物, 水果, 木材",
                capital: "艾尔塔柏",
                flagText: "THAY",
                flagFile: "images/flags/thay.png"
            },
            "alaor": {
                name: "安劳特区",
                motto: "\"金币不问出身\"",
                desc: "塞尔最南端的岛屿省份，唯一的对外开放窗口。废除奴隶制，建立了更高效的契约劳工体系。",
                relation: "极度不信任",
                military: "旗鼓相当",
                leader: "总督 德蒂娜雷亚",
                gov: "特区军管政府",
                export: "奢侈品, 魔法服务, 航运",
                capital: "安劳",
                flagText: "ALAOR",
                flagFile: "images/flags/alaor.png"
            },
            "aglarond": {
                name: "阿戈拉隆",
                motto: "\"守护古老的誓约\"",
                desc: "位于半岛上的魔法王国。黄金之路的断绝重创了其经济，内部对欣布离去后的权力真空感到迷茫。",
                relation: "中立", 
                military: "压倒性", 
                leader: "欣布奇议会",
                gov: "立宪议会制",
                export: "谷物, 木材, 宝石, 铜矿, 葡萄酒",
                capital: "威普林塔拉",
                flagText: "AGLR",
                flagFile: "images/flags/aglarond.png"
            },
            "rashemen": {
                name: "莱瑟曼",
                motto: "\"风雪锻造灵魂\"",
                desc: "由神秘女巫和狂战士守护的苦寒之地。封闭排外，个体战力惊人。",
                relation: "同盟",
                military: "压倒性",
                leader: "铁王 曼甘·乌鲁克",
                gov: "君主制/女权统治",
                export: "毛皮, 烈酒, 雕刻品",
                capital: "依米尔玛",
                flagText: "RASH",
                flagFile: "images/flags/rashemen.png"
            },
            "thesk": {
                name: "塞斯克",
                motto: "\"万物皆有价\"",
                desc: "曾经繁荣的贸易联邦，黄金之路的终点。现因商路断绝而濒临破产，秩序崩溃中。",
                relation: "中立",
                military: "更胜一筹",
                leader: "宗主 泰誓",
                gov: "寡头政治",
                export: "食物, 钢铁, 异国商品",
                capital: "泰夫岚姆",
                flagText: "THSK",
                flagFile: "images/flags/thesk.png"
            },
            "greatdale": {
                name: "巨谷",
                motto: "\"旧路不通\"",
                desc: "夹在强权间的广阔森林。德鲁伊维持着平衡。",
                relation: "中立",
                military: "更胜一筹",
                leader: "未知",
                gov: "德鲁伊等级制",
                export: "木雕, 草药, 魔法物品",
                capital: "无",
                flagText: "DALE",
                flagFile: "images/flags/greatdale.png"
            },
            "altumbel": {
                name: "奥屯贝尔",
                motto: "\"海浪知晓一切\"",
                desc: "海盗猎人与排外渔民的半岛。孤立和封闭的代言人。",
                relation: "不信任",
                military: "略逊一筹",
                leader: "统治委员会",
                gov: "寡头政治",
                export: "饮食",
                capital: "斯潘德利永",
                flagText: "ALTM",
                flagFile: "images/flags/altumbel.png"
            }
        };

        const modal = document.getElementById('modal');

        // 军事实力矩阵：
        function getMilitaryColorClass(text) {
            if (text.includes("压倒性")) return "color-red";
            if (text.includes("更胜一筹")) return "color-orange";
            if (text.includes("旗鼓相当")) return "color-yellow";
            if (text.includes("略逊一筹")) return "color-light-green"; 
            if (text.includes("卑如蝼蚁")) return "color-green";      
            return "color-gray";
        }

        // 外交关系矩阵：
        function getRelationColorClass(text) {
            if (text.includes("极度不信任")) return "color-red";
            if (text === "不信任") return "color-orange";
            if (text.includes("中立")) return "color-yellow";
            if (text.includes("友好")) return "color-light-green"; 
            if (text.includes("同盟")) return "color-green";       
            return "color-gray";
        }

        // 预加载逻辑：立即启动
        (function preloadFlags() {
            console.log("正在同步位面旗帜数据...");
            Object.values(countryData).forEach(data => {
                if (data.flagFile) {
                    const img = new Image();
                    img.src = data.flagFile;
                }
            });
        })();

        function openCard(key) {
            const d = countryData[key];
            if (!d) return;

            document.getElementById('c-name').innerText = d.name;
            document.getElementById('c-motto').innerText = d.motto;
            document.getElementById('c-desc').innerText = d.desc;
            
            const flagImg = document.getElementById('c-flag-img');
            const flagText = document.getElementById('c-flag-text');

            // 预设重置
            flagImg.style.display = "none";
            flagText.style.display = "block";
            flagText.innerText = d.flagText;

            // 图片显示逻辑
            if (d.flagFile) {
                const tempImg = new Image();
                tempImg.onload = function() {
                    flagImg.src = d.flagFile;
                    flagImg.style.display = "block";
                    flagText.style.display = "none";
                };
                tempImg.src = d.flagFile;
            }

            const relEl = document.getElementById('c-relation');
            relEl.innerText = d.relation;
            relEl.className = "suz-value " + getRelationColorClass(d.relation);

            const milEl = document.getElementById('c-military');
            milEl.innerText = d.military;
            milEl.className = "suz-value " + getMilitaryColorClass(d.military);

            document.getElementById('c-leader').innerText = d.leader;
            document.getElementById('c-gov').innerText = d.gov;
            document.getElementById('c-export').innerText = d.export;
            document.getElementById('c-capital').innerText = d.capital;

            modal.style.display = 'flex';
            setTimeout(() => { modal.classList.add('active'); }, 10);
        }

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { modal.style.display = 'none'; }, 300);
        }

        modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
    </script>
</body>
</html>
